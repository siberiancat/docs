**Версия документа: (30-12-2013 17.00)**

Предварительный взгляд на SteamOS (структура будущего документа)
================================================================

.. contents:: :local:
   :depth: 2

Данная статья написана для того, чтобы прояснить некоторые туманные моменты вокруг Steam Machines, SteamOS, ответить на некоторые созравшие вопросы, дать информацию к размышлению.

Для кого эта статья?
--------------------
Данная статья расчитана на среднестатистического геймера платформы ПК, хотя чтение данной статьи праведным консольным игрокам не запрещено. Данная статья не является руководством, в ней изложен лишь факты работы с конкретными экземлярами программного и аппаратного обеспечения.

Что такое Steam Machine?
------------------------
`Steam Machine <http://steamcommunity.com/groups/steamuniverse/discussions/3/864980277762514288/>`_ - это любое устройство, на котором можно будет запустить steam и игры, которые доступны для целевой программно-аппаратной платформы. Преимущественно сейчас Steam Machine - это персональный компьютер (далее ПК) по управлением любой из ниже перечисленных операционных систем (расположены в алфавитном порядке):

* MacOS X (точно начиная с версий 10.x.x)
* SteamOS (или любого другого пользовательского дистрибутива Linux)
* Microsoft Windows:
	* Windows XP, ныне не обновляется Microsoft, полный отказ от поддержки Апрель 2014
	* Windows Vista, ныне не обновляется Microsoft, полный отказ от поддержки Апрель 2017
	* Windows 7, обновления перестанут выходить 13 Января 2015
	* Windows 8

При использовании Linux в качестве программной прослойки Valve может вполне успешно использовать любое железо, на котором собственно и работает Linux, чтобы это железо превратить в Steam Machine, а это вполне могут быть:

* Планшеты, КПК, смартфоны;
* PS4, Xbox One

Следовательно до определенной степени нельзя сказать, что Steam Machine - это только ПК или это стопроцентная консоль.

Что такое SteamOS?
------------------
`SteamOS <http://steamcommunity.com/groups/steamuniverse/discussions/1/648814395741989999/>`_ - это операционная система, построенная на базе `Linux <http://ru.wikipedia.org/wiki/Linux>`_, в частности это дистрибутив Linux - Debian (версия wheezy). <тут что-нибудь для новичков>

Железо
------
Список железа, на котором будет тестирование:

* Intel i7 4770k, 8Gb RAM DDR3, Radeon R9 280x 3GB RAM DDR5/Nvidia GTX 650Ti/Intel HD4600, SteamOS/Ubuntu
  (также возможно чуть попозже будет что-то вроде GTX 770-760, но не обещаю что будет точно, вообще планируется)
* Intel i5-3230m, 6GB RAM DDR3, Nvidia 730M/Intel HD4000, Gentoo (*замеры на данной системе будут отдельно и попозже*)

Геймпады:

* Xbox360 wired controller (xbox360 совместимый).
* Razer Onza Tournament Edition (xbox360 совместимый).
* Thrustmaster Dual Trigger 3 in 1 Rumble Force (xbox360 не совместимый).


Общие сведения
--------------
Общие сведения о SteamOS:

SteamOS является чистокровным Linux'ом, как и было написано выше. Само по себе влияние Valve на втутренности системы не особо велико, поэтому опытным пользователям будет также удобно пользоваться SteamOS как и любым другим дистрибутивом, основанным на Debian. На данный момент правда количество софта в `репозитории <http://wiki>`_ сравнительно не велико.

Сама Valve рекомендует использовать аппаратные компоненты в вашем ПК не ниже:

* **процессоры Intel or AMD 64-bit** - справедливо, так как x86 (32bit) системы Valve не выкладывала. Иными словами SteamOS требует совместимого с x64 процессора.
* **4GB ОЗУ (RAM)** или более, данное требование не критично хватит > 1GB, но разумеется не стоит ожидать что все игры будут работать быстро, так как сама система также потребляет часть этой памяти
* **500GB жесткий диск (SDD/HDD)**, любой достуный вам на мой взгляд. Сама SteamOS занимает 2GB в стандартной комплектации, больше места необходимо для установки большого количества игр.
* **графические карты от NVIDIA** (*AMD and Intel карты официально будут поддерживаться немного позже*), если вы не про в линуксах на текущий момент крайне рекомендую придерживаться данного требования, не смотря на то, что данная статья пишется как раз таки при карточки AMD.
* **UEFI**, важно только для новичков, сам `дистрибутив <http://ru.wikipedia.org/wiki/%D0%94%D0%B8%D1%81%D1%82%D1%80%D0%B8%D0%B1%D1%83%D1%82%D0%B8%D0%B2_%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D0%BE%D0%B9_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B>`_ не работает из BIOS, но способы установить SteamOS в обход UEFI существуют.
* **USB порт для установки**, тут имеется в виду то обстоятельство, что вам нужн USB flash диск, с которого и будет производиться установка. Для новичков это будет оптимальным, для более искусных пользователей ограничений установить SteamOS с оптического диска нет.

Установка
---------
Для установки SteamOS требуется USB flash накопитель, куда необходимо будет сгрузить `содержимое <http://repo.steampowered.com/download/SteamOSInstaller.zip>`_. Сама Valve рекомендует установку на чистый жесткий диск в стандартном режиме авоматической установки, но предупрежают, что все данные могут быть затерты.
Я пытался установить SteamOS на SSD жесткий диск отдельно и в приницпе у меня даже это получилось сделать два раза:

* с помощью автоматической установки;
* с помощью экспертной установки;

Как не странно, но установка на мой взгляд на данный момент предназначена только для опытного пользователя. Первое, что с чем я столкнулся, это было непотяное поведение при установки с флешки, а именно невозможность установки с флешки без дополнительных действий, ровно как и экспертная установка. В целом установить без особых проблем новички смогут только с CD образа, только на чистый винт. Другие случаи просто оставят разачарованным.

Автоматическая установка
~~~~~~~~~~~~~~~~~~~~~~~~
Данный тип установки спрашивает пользователя только пару раз, из плюсов можно отметить только то, что пользователя почти не ставят перед выбором чего-либо, что еще он не знает. Из минусов можно отметить тот факт, что вся установка будет по умолчанию проходить на английском языке, так как установщик не предложит выбрать язык установки по умолчанию.
SteamOS в режиме автоматической установки ставится где-то 10-15 минут на SSD накопитель.

Экспертная установка
~~~~~~~~~~~~~~~~~~~~
Установка в режиме эксперта отличается от автоматической правом выбора некоторых опций, например таких как:

* язык установки;
* раскладка клавиатуры;
* разметка диска (у меня разметка диска запустилась только когда я ставил steamos в виртуальную машину в реальной установки мне так и не дали самому что-то разметить)
* настройка временной зоны

Действия после установки
````````````````````````
Не смотря на то, что с флешки установилось все и настроилось в как в случае автоматической установки, так и экспертной система не доустановила почти половину системы. С этой проблемой я справился довольно быстро, но тем не менее это очень сильно может удивить новичков в Linux мире.

Мне пришлось потратить около получаса, чтобы заставить заработать SteamOS как нужно, люди, которые знакомы с Debian системами в принципе не потратят много времени, чтобы заставить работать все как нужно.

Также независимо от того как пройдет установка пользователи AMD карт скорее всего не смогут сразу запустить систему в графическом режиме. С этой проблемой я разобрался с помощью установки драйвера от AMD версии 13.12, но даже не смотря на данный шаг мне пришлось привлекать еще дополнительные интеллектуальные мощности, так как драйвер не встал из коробки, пришлось его патчить.

Valve не рекомендует использовать Intel и AMD видеокарты на текущий момент (04.01.2014), их поддержка будет добавлена в будущем. Опытные пользователи могут спокойно игнорировать это ограничение и приготовится к тюнингу системы своими руками.

Выводы по установке SteamOS
```````````````````````````
На текущий момент (04.01.2014) установка SteamOS на реальном конфиге компьютера рекомендована только опытным linux пользователям, если вы новичек просто ждите, пока Valve не улучшит установщик и не сделает его для всех людей, о чем они обязательно сообщат. Опытным Linux пользователям советую установку через VirtualBox или через другую виртуальную машину, чтобы не уронить уже рабочее окружение.

* Что такое SteamOS, на чем базируется? [done]
* Системные требования для установки. [done]
* Краткая справка по установке (для опытных пользователей и это будет 100% не руководство).
* Скорость загрузки.
* Программная комплектация, окружение (чем можно заняться в SteamOS кроме игр на текущий момент).


SteamOS перформанс (performance)
--------------------------------


Регламент
~~~~~~~~~
*К сожалению* на данный момент нет средств, которые смогли бы замерять производительность в разных играх для Linux систем, в том числе и SteamOS, поэтому игры со встроенными инструментами замера производительности будут оцениваться по конкретным цифрам, все остальное в порядке замеров на глаз. Регламент для каждой игры будет выставлен в пределах от 20м до 1 часа.

Общая информация про производительность
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Скорость загрузки на SSD накопителе составила ~**20 секунд** до экрана входа в систему, что на самом деле не особо быстро, так как даже на чистый HDD жесткий диск Ubuntu запускается за меньшее время.

SteamOS на запуске потребляет немного памяти, ~700MB ОЗУ(RAM) при входе в систему. С запущенным chromium 10-12 вкладками, с запущенным youtube стримом, со всеми моими дополнениями; с запущенным стим-клиентом памяти потреблялось 2GB.

Нагрузка на процессор, сеть и жесткий диск без каких-либо видимых изменений в сторону утяжеления.

В целом скорость работы SteamOS похожа на скорость любого другого свежеустановленного дистрибутива Linux или Windows, при поддержании порядка в системе и использовании стандартного окружения SteamOS будет работать также быстро через год, как и в момент последней настройки или установки софта в систему.

Игровой перформанс
~~~~~~~~~~~~~~~~~~
Список игр, которые тыкали вдоль и поперек на предмет производительности (около 100, от мала до велика).

A-AA-AAA тайтлы
```````````````
Игры, попавшие под категорию AAA, подробные замеры производительности. А это будут:

* `Brutal Legend <http://store.steampowered.com/app/225260/>`_ - порт с xbox360/ps3 игры о тяжелом металле от именитой Double Fine.
* `Dota 2 <http://store.steampowered.com/app/570/>`_ - сиквел популярного мода на **Warcraft 3** от Valve.
* `Left 4 Dead 2 <http://store.steampowered.com/app/550>`_ - кооперативный шутер по отстрелу орд зомби от Valve.
* `Half Life 2 <http://store.steampowered.com/app/220/>`_ с эпизодами - то во что можно поиграть до выхода HL3.
* `Portal <http://store.steampowered.com/app/400>`_ - первая часть знаменитой игры про порталы, сарказм и машинный юмор.
* `Team Fortress 2 <http://store.steampowered.com/app/440/>`_ - сиквел популярного мода от Valve.
* `Metro Last Light <http://store.steampowered.com/app/43160>`_ - сиквел постапокалиптического шутера, где действия разворачиваются на территории метро города Москвы.
* `Painkiller: Hell and Damnation <http://store.steampowered.com/app/214870>`_ - последняя часть приключений добра в преисподни.
* `Serious Sam 3: BFE <http://store.steampowered.com/app/41070>`_ - Серьезный Сэм очень серьезен. 

*Все игры запускались изначально на самых высоких настройках*

Brutal Legend
@@@@@@@@@@@@@
**- fps**

При запуске на AMD R9 280x игра показала на мой взгляд среднюю планку как оптимизации так и производительности. К сожалению замерить FPS для Brutal Legend в SteamOS пока нечем, но игра бодро держится и не позволяет себе фризов в ответственные моменты.

Dota 2
@@@@@@
**60+fps**

В DOTA 2 я проиграл большую часть своего времени, как и Left 4 Dead 2 присутствует небольшие фризы на старте, далее этих фризов не возникает. При максимальных настройках Dota 2 чувствует себя на ~90 fps в среднем, не просядая ниже 60-75FPS за матч.

.. include:: benchmarks/dota2_benchmark.rst

Left 4 Dead 2
@@@@@@@@@@@@@
**~110fps**

Запус на AMD R9 280x показал себя с очень положительной стороны, так как игра шла очень бодро и производительность не просядала ниже 80fps, в среднем на максимальных настройках Left 4 Dead выдавал бобро ~110+, в узких помещениях счетчик кадров в секунду доходил до 300 fps. Единственным не гладким моментом может быть начало каждой карты, когда происходят небольшие фризы, скорее всего связанные с подгрузкой объектов мира, после старта фризы пропадают полностью.

.. include:: benchmarks/l4d2_benchmark.rst

Half-Life 2 + EP1
@@@@@@@@@@@@@@@@@
**~200fps**

Главный флагман, по которому так таскуют фанаты довольно бодро бегает на 200+ FPS. В среднем в помещениях показатель кадров в секунду держался на уровне 299 FPS. После чего пришлось переустановить ``fps_max`` параметр в 600, для того чтобы увидеть верхнюю границу. Она составила 300-400 fps в среднем, со скачками до 600.

.. include:: benchmarks/hl2_benchmark.rst

Team Fortress 2
@@@@@@@@@@@@@@@
**~180fps**

При максимальных настройках игра показала себя также хорошо как и весь Source парк игр от Valve державшись на отметке ~200FPS.

.. include:: benchmarks/tf2_benchmark.rst

Portal
@@@@@@
**~270fps**

270+ FPS

Psychonauts
@@@@@@@@@@@
**- fps**

К сожалению возможности замерить FPS в этой игре под SteamOS нет. Производительность в пределах адекватно-быстрой работы. Те кто еще не прошел знаметитых психонавтов, то вполне это может сделать под SteamOS.

Metro Last Light
@@@@@@@@@@@@@@@@
**- fps**

Как и Psychonauts не обладает встроенными средствами для замера производительности, тем не менее на мой взгляд это лучший порт на SteamOS/Linux в силу того, что работает все гладко, графика и прозводительность нареканий не вызывают.

Painkiller: Hell and Damnation
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
Работать на максимальной графике Painkiller отказывается падая после запуска.

Serious Sam 3
@@@@@@@@@@@@@
При старте крашится, соответственно никаких тестов провести на AMD R9 280x не удалось, все следы идут к драйверам.

Итоги
@@@@@


Инди-тайтлы
```````````
Такой же раздел но уже для менее требовтельных к железу игр.

Other Linux performance
-----------------------

* Ubuntu для сборки на i7
* Gentoo для сборки на i5

Будет представлена сравнительная информация по производительности к SteamOS:

* AAA-тайтлы, которые фигурировали в разделе игрового перформанса
* Инди-тайтлы, которые фигурировали в разделе игрового перформанса

Windows performance
-------------------

* Windows 7 x86

Будет представлена сравнительная информация по производительности к SteamOS:

* ААА-тайтлы, которые фигурировали в разделе игрового перформанса

Дополнительная информация
-------------------------
*переозоглавить*

Софт в SteamOS
~~~~~~~~~~~~~~
Как было написано выше, что SteamOS в своей базовой поставке достаточно скромен и тут отсутствует почти все для обычного пользователя. Тем не менее, не даже на столь маленькое количество пользовательского программного обеспечения часть можно спокойно установить из `репозиториев <http://link>`_ дистрибутива Debian Wheezy.

Можно использовать следующее руководство для того чтобы расширить SteamOS дополнительным пользовательским софтом пройдя по `ссылке <http://steamcommunity.com/groups/steamuniverse/discussions/1/648814396114274132/>`_

Мне потребовалось буквально несколько часов чтобы продолжить написание статьи уже не в Ubuntu или Gentoo, как это было изначально, а из SteamOS, синхронизируя саму статью через git на `github <http://github.com/tarvitz/docs/>`_.

Стабильность софта
``````````````````
На данный момент стабильность софта в SteamOS находится на среднем уровне, это значит, что есть как странные, так и раздражающие нюансы в работе с софтом и окружением в SteamOS, не буду перечислять все глюки с которыми я сталкнулся. Valve будет работать над этими ошибками и недостатками и исправлять их. В момент выхода клиента steam для Linux было огромнейшее количество ошибок (интересущимся можно посмотреть `github трекер steam для linux <https://github.com/ValveSoftware/steam-for-linux/issues>`_), на данный момент steam клиент работает стабильно и без каких-либо серьезных ошибок и глюков. Думаю, что и с рабочим окружением Valve будет работать на должном уровне. На мой взгляд стабильность и качество уже на данный момент подходит для пользователя среднего уровня (без опыта работы с Linux).

Железо в SteamOS
~~~~~~~~~~~~~~~~
Из всего железа в SteamOS было проведенно поверхностное тестирование встроенной звуковой карты, геймпадов. Какое-то более специализированное оборудование вроде принтера, сканера, графического планшета (wacom cintiq) оттестировано не было.

XBox 360 совместимые геймпады работают отлично, единственное что необходимо будет сделать его калибровку в настройках steam big picture. Других методов настройки геймпада пока не предусмотрено. **Настройка геймпада в SteamOS возможна только в режиме big picture**, но организована достаточно просто и приятно.

К сожалению не все игры были сделаны для xbox 360 совместимых контроллеров, например в **Psychonauts** играть можно на геймпаде, но курки работать не будут, чтобы заставить их заработать придется сильно напрячься и использовать специальный драйвер xboxdrv, который смогут быстро освоить только опытные Linux пользователи. На мой взгляд это плохо для рядового пользователя, но тем не менее способы конфиграции геймпадов предусмотрены самого лучшего и высокого качества, что в принципе сглаживает предыдущий недостаток.

**Razer Onza Tournament Edition** имеет нестандартную схему расстановки элементов управления курки и бамперы перевернуты, поэтому подключив такой геймпад необходимо будет перенастраивать его. Второе, у меня этот геймпад выдает артефакты, так как его чуствительность нельзя установить в Big Picture в настройках на стандартном драйвере. Также игры, где нельзя установить мертвую зону для различных осей на геймпаде сильно расстраивают.


**Thrustmaster Dual 3 in 1** не имеет xbox360 совместимую схему и для корректной работы геймпада в Windows зачастую необходимо было использовать xbox360emu. В SteamOS настройка клавиш геймпада лежит на плечах steam клиента (напомню, что сама расскладка конфигурируется в режиме big picture). Не смотря на то, что это PS3 совместимый геймпад он вполне хорошо работает в играх с их поддержкой, тем не менее определяться геймпад будет как xbox360 совместимый и будет показывать зачастую ABXY клавиши, правда конечно не во всех играх.

* **Скриншоты адекватного рабочего окружения**

Поддержка SteamOS различными компаниями
---------------------------------------
Тут про компании, которые уже хорошо работают с Linux + SteamOS

Итог, заключение
----------------
Заключительная информация, общая оценка SteamOS по критериям:

* производительность;
* общая скорость работы;
* комплектация;
* возможности (как общие фичи, так и специальные);